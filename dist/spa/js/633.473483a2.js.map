{"version":3,"file":"js/633.473483a2.js","mappings":"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","sources":["webpack://goaldetectionmini_app/./src/pages/Index.vue","webpack://goaldetectionmini_app/./src/composables/keysActive.js","webpack://goaldetectionmini_app/./src/composables/connectionGoalDetectionMini.js","webpack://goaldetectionmini_app/./src/pages/Index.vue?0c1a","webpack://goaldetectionmini_app/./src/pages/Index.vue?8839"],"sourcesContent":["<template>\n  <q-page class=\"flex flex-center\">\n    <!-- <img\n    alt=\"Quasar logo\"\n    src=\"~assets/quasar-logo-vertical.svg\"\n    style=\"width: 200px; height: 200px\"\n    > -->\n    <section>\n      <p>\n        connected: {{ connected }}\n      </p>\n      <p>\n        goal1: {{ goal1 }}\n      </p>\n      <p>\n        goal2: {{ goal2 }}\n      </p>\n    </section>\n  </q-page>\n</template>\n\n<script>\nimport {\n  defineComponent,\n  ref,\n  onMounted\n} from 'vue';\n\n// import connectionGoalDetectionMini from '@/composables/connectionGoalDetectionMini'\n\nimport connectionGoalDetectionMini from '../composables/connectionGoalDetectionMini'\n\nexport default defineComponent({\n  name: 'PageIndex',\n  setup () {\n     const { connected, goal1, goal2 } = connectionGoalDetectionMini()\n     return {\n       connected,\n       goal1,\n       goal2\n     }\n  }\n})\n\n\n</script>\n","import {\n  ref,\n  toRaw,\n  onMounted,\n  onUnmounted\n} from 'vue';\n\nexport default function keysActiveManager(element = document) {\n  // const keysActive = ref(new Map())\n  const keysActive = ref({})\n\n  // inspired by\n  // https://stackoverflow.com/a/12444641/574981\n\n  const timeoutDelay = 3000; // ms\n  let timeoutID = false; // ms\n\n  const checkAllReleased = () => {\n      let allReleased = true\n      for (var key in keysActive.value) {\n          if (keysActive.value.hasOwnProperty(key)) {\n            if (keysActive.value[key]) {\n                allReleased = false\n            }\n          }\n      }\n      return allReleased\n  }\n\n  const clearKeyTimeoutIfAllReleased = () => {\n      if (timeoutID != false) {\n          if (checkAllReleased()) {\n              // stop timeout\n              clearTimeout(timeoutID)\n          }\n      }\n  }\n\n  const startKeyTimeout = () => {\n      if (timeoutID != false) {\n          // stop old timeout\n          clearTimeout(timeoutID)\n      }\n      // setup new timeout\n      timeoutID = setTimeout(() => {\n          // clear keysActive\n          for (var key in keysActive.value) {\n              if (keysActive.value.hasOwnProperty(key)) {\n                keysActive.value[key] = false\n                delete keysActive.value[key]\n              }\n          }\n          console.log('keysActive cleared by timeout.');\n      }, timeoutDelay);\n  }\n\n  const handleKeyDown = event => {\n      keysActive.value[event.code] = true\n      // console.log('keyDown', event.code)\n      event.preventDefault();\n      startKeyTimeout()\n      // console.log('keysActive.value', {...keysActive.value })\n      // console.log('keysActive.value', toRaw(keysActive.value))\n  }\n  const handleKeyUp = event => {\n      keysActive.value[event.code] = false\n      delete keysActive.value[event.code]\n      // console.log('keyUp', event.code)\n      clearKeyTimeoutIfAllReleased()\n      event.preventDefault();\n  }\n\n  const setupKeyListener = () => {\n      element.addEventListener('keydown', handleKeyDown);\n      element.addEventListener('keyup', handleKeyUp);\n  }\n  const cleanup = () => {\n      element.removeEventListener('keydown', handleKeyDown);\n      element.removeEventListener('keyup', handleKeyUp);\n      clearTimeout(timeoutID);\n  }\n\n  onMounted(setupKeyListener)\n  onUnmounted(cleanup)\n\n  // return {\n  //   keysActive\n  // }\n  return keysActive.value\n}\n","import {\n    ref,\n    toRefs,\n    toRaw,\n    watch,\n    onUnmounted\n} from 'vue';\n\nimport keysActiveManager from './keysActive'\n\nexport default function connectionGoalDetectionMini() {\n    const connected = ref(false)\n    const goal1 = ref(0)\n    const goal2 = ref(0)\n\n    const connectedTimeout = 10 * 1000 // ms\n    let connectedTimeoutID = false // ms\n\n    const startConnectedTimeout = () => {\n        if (connectedTimeoutID != false) {\n            clearTimeout(connectedTimeoutID)\n        }\n        connectedTimeoutID = setTimeout(() => {\n            connected.value = false\n            connectedTimeoutID = false\n        }, connectedTimeout)\n    }\n\n\n    // const keysActive = keysActiveManager()\n    // console.log(keysActive)\n    // const test = toRefs(keysActive)\n    const keysActive = keysActiveManager()\n    // console.log(keysActive)\n\n    watch(keysActive, (newValue, oldValue) => {\n        console.log('keysActive changed', toRaw(keysActive))\n        if (\n            // ShiftLeft ControlLeft AltLeft Digit2\n            keysActive['ShiftLeft']\n            && keysActive['ControlLeft']\n            && keysActive['AltLeft']\n        ) {\n            // if (keysActive['OSLeft']) {\n            // if (keysActive['Insert']) {\n            if (keysActive['F7']) {\n                connected.value = true\n                startConnectedTimeout()\n            }\n            if (keysActive['Digit1']) {\n                goal1.value += 1\n            }\n            if (keysActive['Digit2']) {\n                goal2.value += 1\n            }\n        }\n    })\n\n    const cleanup = () => {\n        clearTimeout(connectedTimeoutID);\n    }\n\n    onUnmounted(cleanup)\n\n    return {\n        connected,\n        goal1,\n        goal2\n    }\n}\n","export { default } from \"-!../../node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./Index.vue?vue&type=script&lang=js\"; export * from \"-!../../node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./Index.vue?vue&type=script&lang=js\"","import { render } from \"./Index.vue?vue&type=template&id=220585f3\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/stefan/mydata/jobs/Kivent_GmbH/TischKicker/GoalDetectionMini/GoalDetectionMini_APP/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport qInstall from \"../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(script, 'components', {QPage});\n"],"names":["ref","toRaw","onMounted","onUnmounted","keysActiveManager","element","document","keysActive","timeoutDelay","timeoutID","checkAllReleased","allReleased","key","value","hasOwnProperty","clearKeyTimeoutIfAllReleased","clearTimeout","startKeyTimeout","setTimeout","console","log","handleKeyDown","event","code","preventDefault","handleKeyUp","setupKeyListener","addEventListener","cleanup","removeEventListener","toRefs","watch","connectionGoalDetectionMini","connected","goal1","goal2","connectedTimeout","connectedTimeoutID","startConnectedTimeout","newValue","oldValue"],"sourceRoot":""}